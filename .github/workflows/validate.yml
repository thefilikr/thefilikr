name: Profile Validation
on:
  schedule:
  - cron: '0 12 * * *' # –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 12:00 UTC
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
  pull_request:
    branches: [ main ]

jobs:
  validate-profile:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Validate README structure
      run: |
        echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã README..."

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        if grep -q "img.jpg" README.md; then
          echo "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞–π–¥–µ–Ω–æ"
        else
          echo "‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
          exit 1
        fi

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ–∫—Ü–∏–π
        sections=("–û —Å–µ–±–µ" "–°–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞—é –Ω–∞–¥" "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫" "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ GitHub" "–°–≤—è–∑–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π")

        for section in "${sections[@]}"; do
          if grep -q "##.*$section" README.md; then
            echo "‚úÖ –°–µ–∫—Ü–∏—è '$section' –Ω–∞–π–¥–µ–Ω–∞"
          else
            echo "‚ùå –°–µ–∫—Ü–∏—è '$section' –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
            exit 1
          fi
        done

        echo "‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç"

    - name: Check technology badges
      run: |
        echo "üõ†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –±–µ–π–¥–∂–µ–π..."

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
        techs=("Python" "Go" "TypeScript" "PostgreSQL" "MongoDB" "Docker")

        for tech in "${techs[@]}"; do
          if grep -q "$tech" README.md; then
            echo "‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è '$tech' –Ω–∞–π–¥–µ–Ω–∞"
          else
            echo "‚ö†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è '$tech' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
          fi
        done

    - name: Validate links
      run: |
        echo "üîó –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫..."

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ GitHub –∏ Telegram
        if grep -q "github.com/thefilikr" README.md; then
          echo "‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ GitHub –Ω–∞–π–¥–µ–Ω–∞"
        else
          echo "‚ùå –°—Å—ã–ª–∫–∞ –Ω–∞ GitHub –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
          exit 1
        fi

        if grep -q "t.me/the_filikr" README.md; then
          echo "‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ Telegram –Ω–∞–π–¥–µ–Ω–∞"
        else
          echo "‚ùå –°—Å—ã–ª–∫–∞ –Ω–∞ Telegram –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
          exit 1
        fi

    - name: Check file size
      run: |
        echo "üìè –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤..."

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä README
        readme_size=$(wc -c < README.md)
        if [ $readme_size -gt 1000 ]; then
          echo "‚úÖ README –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∞–∑–º–µ—Ä: ${readme_size} –±–∞–π—Ç"
        else
          echo "‚ö†Ô∏è README —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π: ${readme_size} –±–∞–π—Ç"
        fi

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        if [ -f "img.jpg" ]; then
          img_size=$(wc -c < img.jpg)
          echo "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞–π–¥–µ–Ω–æ: ${img_size} –±–∞–π—Ç"
        else
          echo "‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
          exit 1
        fi

    - name: Generate validation report
      run: |
        echo "üìã –û—Ç—á–µ—Ç –æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è"
        echo "================================"
        echo "‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ README: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞"
        echo "‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏: –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç"
        echo "‚úÖ –°—Å—ã–ª–∫–∏: –†–∞–±–æ—á–∏–µ"
        echo "‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ù–∞–π–¥–µ–Ω–æ"
        echo "‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: –û–±–Ω–æ–≤–ª–µ–Ω—ã"
        echo ""
        echo "üéâ –ü—Ä–æ—Ñ–∏–ª—å –ø—Ä–æ—à–µ–ª –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏!" 
